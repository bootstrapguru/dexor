Adjustments to message and tool handling logic are clear. Ensure that null check or unexpected scenario handling is included where required. Consider logging any critical failures or unexpected behaviors for easier debugging in the future.